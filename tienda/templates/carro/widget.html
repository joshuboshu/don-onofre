{% load static %}

<!-- Contenedor del widget de categorías -->
<div class="categories-widget">
    <h2 class="categories-title">Categorías</h2>
    {% if categorias %}
        <ul class="categories-list">
            <!-- Enlace para mostrar todos los productos -->
            <li class="category-item">
                <a href="{% url 'Tienda' %}" class="category-link {% if not categoria_actual %}active{% endif %}">
                    <i class="fas fa-th-large category-icon"></i>
                    <span class="category-name">Todas las categorías</span>
                </a>
            </li>
            {% for categoria in categorias %}
                <li class="category-item">
                    <a href="{% url 'productos_por_categoria' categoria.id %}" 
                       class="category-link {% if categoria_actual.id == categoria.id %}active{% endif %}">
                        <i class="fas fa-folder category-icon"></i>
                        <span class="category-name">{{ categoria.nombre }}</span>
                        <span class="category-count">{{ categoria.producto_set.count }}</span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="no-categories">No hay categorías disponibles.</p>
    {% endif %}
</div>

<style>
    .categories-widget {
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        padding: 1.5rem;
        max-width: 320px;
        font-family: 'Roboto', sans-serif;
    }

    .categories-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #8B4513;
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid #E8D5C3;
    }

    .categories-list {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    .category-item {
        margin-bottom: 0.75rem;
    }

    .category-link {
        display: flex;
        align-items: center;
        padding: 0.75rem;
        border-radius: 8px;
        text-decoration: none;
        color: #5D4037;
        transition: all 0.3s ease;
    }

    .category-link:hover, .category-link.active {
        background-color: #F5F0EB;
        color: #8B4513;
    }

    .category-icon {
        margin-right: 0.75rem;
        color: #A67C52;
        font-size: 1.1rem;
    }

    .category-name {
        flex-grow: 1;
        font-weight: 500;
    }

    .category-count {
        background-color: #E8D5C3;
        color: #8B4513;
        font-size: 0.8rem;
        font-weight: 600;
        padding: 0.2rem 0.5rem;
        border-radius: 12px;
    }

    .no-categories {
        color: #8D6E63;
        text-align: center;
        padding: 1rem 0;
        font-style: italic;
    }

    @media (max-width: 768px) {
        .categories-widget {
            max-width: 100%;
        }
    }
</style>

